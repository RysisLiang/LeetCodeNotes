# 224 基本计算器

hard

## 题目

给你一个字符串表达式 s ，请你实现一个基本计算器来计算并返回它的值。

示例 1：
```
输入：s = "1 + 1"
输出：2
示例 2：

输入：s = " 2-1 + 2 "
输出：3
示例 3：

输入：s = "(1+(4+5+2)-3)+(6+8)"
输出：23
```

提示：

- `1 <= s.length <= 3* 105`
- s 由数字、'+'、'-'、'('、')'、和 ' ' 组成
- s 表示一个有效的表达式

## 思路

首先由于题目中定义的运算符没有乘除，只有加减和括号，那么括号的意义仅剩用于约束内部数字的正负号而已，对于数字的相加减顺序已经没有强制的意义了。

所以我们只需要控制要每个数字的符号即可，然后将数字依次相加。同时需要注意数字可能有多位组成，所以需要进行连续性的判断（数字不全是字符形式的）。

最终的简化后的流程就是：
1. 先定义一个符号记录器 `outSymbol` 用于记录当前数字前的正负号，1是正号，-1是负号；
2. 再构造一个整数的栈 `stack`（这里我使用了数组模拟的，因为实际上的元素应该不会很多），用于记录当前数字所在括号外的符号，默认假设整个表达式外面有一个括号，符号是正，所以0索引是1；
3. 遍历字符串，一次解析字符的内容：
    1. 空 -》跳过；
    2. 正号 -》取括号前符号 outSymbol = + stack.peek。这样能保证当前的符号是受括号前的符号约束后的结果； 
    3. 负号 -》取括号前相反符号 outSymbol = - stack.peek。这样能保证当前的符号是受括号前的符号约束后的结果；
    4. ( -》将之前的符号压入栈中；
    5. ) -》将栈中的符号弹出一个；
    6. 数字 -》转int，然后判断下一个字符是否是数字，while循环拼接成一个int num。然后判断当前的outSymbol是正负与sum进行累计加减；


## 实现

[代码 -> com.rysis/queue/Main224.java](../../src/com/rysis/queue/Main224.java)